<div class="space-y-6">
  <div class="flex justify-between items-center">
    <h1 class="text-2xl font-bold text-gray-900">ダッシュボード</h1>
    <%= link_to "新規記録", new_delivery_path, 
        class: "bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-200" %>
  </div>

  <!-- KPI Cards -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
    <div class="bg-white p-6 rounded-lg shadow">
      <h3 class="text-sm font-medium text-gray-500">総件数</h3>
      <p class="text-2xl font-bold text-gray-900"><%= @deliveries.count %></p>
    </div>
    <div class="bg-white p-6 rounded-lg shadow">
      <h3 class="text-sm font-medium text-gray-500">売上合計</h3>
      <p class="text-2xl font-bold text-gray-900">¥<%= number_with_delimiter(@deliveries.sum(:price_yen)) %></p>
    </div>
    <div class="bg-white p-6 rounded-lg shadow">
      <h3 class="text-sm font-medium text-gray-500">平均単価</h3>
      <p class="text-2xl font-bold text-gray-900">¥<%= @deliveries.any? ? number_with_delimiter(@deliveries.average(:price_yen).to_i) : 0 %></p>
    </div>
    <div class="bg-white p-6 rounded-lg shadow">
      <h3 class="text-sm font-medium text-gray-500">平均時間</h3>
      <p class="text-2xl font-bold text-gray-900"><%= @deliveries.any? ? @deliveries.average(:duration_min).to_i : 0 %>分</p>
    </div>
  </div>

  <!-- Recent Deliveries -->
  <div class="bg-white rounded-lg shadow">
    <div class="px-6 py-4 border-b border-gray-200">
      <h2 class="text-lg font-medium text-gray-900">最近の配達記録</h2>
    </div>
    <div class="overflow-x-auto">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">日時</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">地区</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">店舗名</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">料金</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">時間</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          <% @deliveries.limit(10).each do |delivery| %>
            <tr>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                <%= delivery.delivered_at.strftime("%m/%d %H:%M") %>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                <%= delivery.area.name %>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                <%= delivery.store_name %>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                ¥<%= number_with_delimiter(delivery.price_yen) %>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                <%= delivery.duration_min %>分
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                <%= link_to "詳細", delivery, class: "text-blue-600 hover:text-blue-900 mr-2" %>
                <%= link_to "編集", edit_delivery_path(delivery), class: "text-indigo-600 hover:text-indigo-900" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
    <% if @deliveries.count > 10 %>
      <div class="px-6 py-4 border-t border-gray-200">
        <%= link_to "すべて表示", deliveries_path, class: "text-blue-600 hover:text-blue-900" %>
      </div>
    <% end %>
  </div>
</div>